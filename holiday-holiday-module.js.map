{"version":3,"sources":["webpack:///./src/app/modules/metadata/holiday.service.ts","webpack:///./src/app/modules/organization/holiday/holiday.module.ts","webpack:///./src/app/modules/organization/holiday/holiday.routing.ts","webpack:///./src/app/modules/organization/holiday/holiday.service.ts","webpack:///./src/app/modules/organization/holiday/list-holiday/list-holiday.component.html","webpack:///./src/app/modules/organization/holiday/list-holiday/list-holiday.component.ts","webpack:///./src/app/modules/organization/holiday/manage-holiday/manage-holiday.component.html","webpack:///./src/app/modules/organization/holiday/manage-holiday/manage-holiday.component.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAIA;QAAA;QAQA,CAAC;QAAD,cAAC;IAAD,CAAC;IARY,0BAAO;IAQnB,CAAC;IAGF;QAAoC,kCAAG;QAIrC,wBAAY,IAAgB;YAA5B,YAEE,kBAAM,IAAI,CAAC,SACZ;YALO,eAAS,GAAW,WAAW,CAAC;;QAKxC,CAAC;QAED,oCAAW,GAAX,UAAY,IAAY;YAEtB,OAAO,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,GAAG,GAAG,GAAG,IAAI,CAAC;iBACzC,IAAI,CAAC,kBAAQ,IAAI,eAAQ,CAAC,MAAM,CAAc,EAA7B,CAA6B,CAAC,CAAC;QACrD,CAAC;QAbU,cAAc;YAD1B,iBAAU,EAAE;6CAKO,iBAAU;WAJjB,cAAc,CAc1B;QAAD,qBAAC;KAAA,CAdmC,iBAAG,GActC;IAdY,wCAAc;;;;;;;;;;;;;;;;;;;;;;;ICU3B;QAAA;QAA6B,CAAC;QAAjB,aAAa;YAfzB,eAAQ,CAAC;gBACR,OAAO,EAAE;oBACP,sCAAoB;oBACpB,mBAAW;oBACX,uBAAgB;oBAChB,qBAAY;oBACZ,2DAA2B;iBAC5B;gBACD,YAAY,EAAE;oBACZ,6CAAoB;oBACpB,iDAAsB;iBACvB;gBACD,SAAS,EAAE,EACV;aACF,CAAC;WACW,aAAa,CAAI;QAAD,oBAAC;KAAA;IAAjB,sCAAa;;;;;;;;;;;;;;;;;;;;;;;ICjB1B,IAAM,MAAM,GAAW;QACrB;YACE,IAAI,EAAE,EAAE;YACR,IAAI,EAAE;gBACJ,KAAK,EAAE,SAAS;aACjB;YACD,QAAQ,EAAE;gBACR;oBACE,IAAI,EAAE,EAAE;oBACR,UAAU,EAAE,MAAM;iBACnB;gBACD;oBACE,IAAI,EAAE,MAAM;oBACZ,IAAI,EAAE;wBACJ,KAAK,EAAE,MAAM;wBACb,MAAM,EAAE;4BACN,MAAM,EAAE,sBAAsB;4BAC9B,MAAM,EAAE,UAAU;yBACnB;qBACF;oBACD,WAAW,EAAE,CAAC,4CAAmB,EAAE,0CAAkB,CAAC;oBACtD,SAAS,EAAE,6CAAoB;iBAChC;gBACD;oBACE,IAAI,EAAE,QAAQ;oBACd,IAAI,EAAE;wBACJ,KAAK,EAAE,QAAQ;wBACf,MAAM,EAAE;4BACN,MAAM,EAAE,sBAAsB;4BAC9B,MAAM,EAAE,YAAY;yBACrB;qBACF;oBACD,WAAW,EAAE,CAAC,4CAAmB,EAAE,0CAAkB,CAAC;oBACtD,SAAS,EAAE,iDAAsB;iBAClC;aACF;SACF;KACF,CAAC;IAMF;QAAA;QAAoC,CAAC;QAAxB,oBAAoB;YAJhC,eAAQ,CAAC;gBACR,OAAO,EAAE,CAAC,qBAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;gBACxC,OAAO,EAAE,CAAC,qBAAY,CAAC;aACxB,CAAC;WACW,oBAAoB,CAAI;QAAD,2BAAC;KAAA;IAAxB,oDAAoB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IC/CjC;QAAA;QAGA,CAAC;QAAD,cAAC;IAAD,CAAC;IAHY,0BAAO;IAGnB,CAAC;IAGF;QAAoC,kCAAG;QAIrC,wBAAY,IAAgB;YAA5B,YAEE,kBAAM,IAAI,CAAC,SACZ;YALO,eAAS,GAAW,yBAAyB,CAAC;;QAKtD,CAAC;QAED,oCAAW,GAAX,UAAY,IAAY;YAEtB,OAAO,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,GAAG,GAAG,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;iBACpD,IAAI,CAAC,kBAAQ,IAAI,eAAQ,CAAC,MAAM,CAAc,EAA7B,CAA6B,CAAC,CAAC;QACrD,CAAC;QAED,oCAAW,GAAX,UAAY,IAAY,EAAE,QAAkB;YAE1C,OAAO,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,GAAG,GAAG,GAAG,IAAI,CAAC,QAAQ,EAAE,EAAE;gBACtD,UAAU,EAAE,QAAQ;aACrB,CAAC,CAAC,IAAI,CAAC,kBAAQ,IAAI,eAAQ,CAAC,MAAM,CAAC,EAAhB,CAAgB,CAAC,CAAC;QACxC,CAAC;QApBU,cAAc;YAD1B,iBAAU,EAAE;6CAKO,iBAAU;WAJjB,cAAc,CAqB1B;QAAD,qBAAC;KAAA,CArBmC,iBAAG,GAqBtC;IArBY,wCAAc;;;;;;;;;;;;;;ACV3B,42BAA42B,MAAM,wnBAAwnB,yCAAyC,KAAK,8BAA8B,mCAAmC,6BAA6B,6BAA6B,6BAA6B,eAAe,qI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ICW/rD;QAQE,8BAAoB,cAA8B,EAAU,aAA4B;YAApE,mBAAc,GAAd,cAAc,CAAgB;YAAU,kBAAa,GAAb,aAAa,CAAe;YANxF,aAAQ,GAAc,KAAK,EAAE,CAAC;YAE9B,UAAK,GAAgB,IAAI,GAAG,EAAU,CAAC;YAEvC,kBAAa,GAAY,KAAK,CAAC;YAI7B,IAAM,WAAW,GAAG,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC;YAC7C,IAAM,SAAS,GAAG,WAAW,CAAC;YAG9B,KAAK,IAAI,IAAI,GAAG,IAAI,EAAE,IAAI,IAAI,SAAS,EAAE,IAAI,EAAE,EAAE;gBAC/C,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;aACtB;YAED,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;QAClC,CAAC;QAEK,uCAAQ,GAAd;;;;;;4BAEE,SAAI;4BAAiB,WAAM,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC;oCACtD,MAAM,EAAE,yBAAyB;oCACjC,MAAM,EAAE,YAAY;iCACrB,CAAC;;4BAHF,GAAK,aAAa,GAAG,SAGnB,CAAC;4BAEH,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;;;;;SACtC;QAED,2CAAY,GAAZ,UAAa,IAAI;YAAjB,iBAGC;YADC,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,kBAAQ,IAAI,YAAI,CAAC,QAAQ,GAAG,QAAQ,EAAxB,CAAwB,CAAC,CAAC;QAChG,CAAC;QAlCU,oBAAoB;YANhC,gBAAS,CAAC;gBACT,QAAQ,EAAE,kBAAkB;;gBAE5B,aAAa,EAAE,wBAAiB,CAAC,IAAI;gBACrC,SAAS,EAAE,CAAE,gCAAc,CAAE;aAC9B,CAAC;6CASoC,gCAAc,EAAyB,qCAAa;WAR7E,oBAAoB,CAmChC;QAAD,2BAAC;KAAA;IAnCY,oDAAoB;;;;;;;;;;;;;;ACXjC,6kBAA6kB,MAAM,4mBAA4mB,gEAAgE,OAAO,gHAAgH,GAAG,iRAAiR,GAAG,KAAK,eAAe,iFAAiF,mCAAmC,yEAAyE,6BAA6B,olBAAolB,OAAO,mC;;;;;;;;;;;;;;;;;;;;;;;ICet9E;QAYE,gCAAoB,cAA8B,EAAU,kBAAsC;YAA9E,mBAAc,GAAd,cAAc,CAAgB;YAAU,uBAAkB,GAAlB,kBAAkB,CAAoB;YARlG,aAAQ,GAAkB,KAAK,EAAE,CAAC;YAClC,UAAK,GAAgB,IAAI,GAAG,EAAU,CAAC;YAEvC,gBAAW,GAAc,KAAK,EAAE,CAAC;YAGjC,UAAK,GAAW,EAAE,CAAC;YAIjB,IAAM,WAAW,GAAG,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC;YAC7C,IAAM,SAAS,GAAG,WAAW,GAAG,CAAC,IAAI,IAAI,EAAE,CAAC,QAAQ,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAGrE,KAAK,IAAI,IAAI,GAAG,IAAI,EAAE,IAAI,IAAI,SAAS,EAAE,IAAI,EAAE,EAAE;gBAC/C,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;aACtB;YAED,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;YAChC,IAAI,CAAC,0BAA0B,EAAE,CAAC;QACpC,CAAC;QAED,yCAAQ,GAAR,cAAa,CAAC;QAEd,0CAAS,GAAT,UAAU,IAAY;YAEpB,IAAM,WAAW,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC;YACnC,OAAO,WAAW,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;QACpC,CAAC;QAED,2DAA0B,GAA1B;YAAA,iBA4DC;YA1DC,IAAI,CAAC,QAAQ,GAAG,KAAK,EAAE,CAAC;YACxB,IAAI,CAAC,WAAW,GAAG,KAAK,EAAE,CAAC;YAE3B,IAAM,cAAc,GAAG,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC;iBAC1E,IAAI,CAAC,kBAAQ,IAAI,YAAI,CAAC,QAAQ,GAAG,QAAQ,EAAxB,CAAwB,CAAC;iBAC1C,KAAK,CAAC,aAAG;gBAGR,IAAI,GAAG,CAAC,MAAM,KAAK,GAAG,EAAE;oBACtB,OAAO;iBACR;gBAED,KAAI,CAAC,KAAK,GAAG,GAAG,CAAC;gBACjB,KAAI,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;YACzB,CAAC,CAAC,CAAC;YAEL,IAAM,iBAAiB,GAAG,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC;iBACzE,IAAI,CAAC,kBAAQ;gBAEZ,IAAI,QAAQ,KAAK,SAAS,EAAE;oBAC1B,OAAO;iBACR;gBAED,QAAQ,CAAC,OAAO,CAAE,iBAAO;oBACvB,KAAI,CAAC,WAAW,CAAC,IAAI,CAAE;wBACrB,IAAI,EAAE,OAAO,CAAC,IAAI;wBAClB,KAAK,EAAE,OAAO,CAAC,KAAK;qBACV,CAAC;gBACf,CAAC,CAAC,CAAC;YACL,CAAC,CAAC;iBACD,KAAK,CAAC,aAAG;gBAGR,IAAI,GAAG,CAAC,MAAM,KAAK,GAAG,EAAE;oBACtB,OAAO;iBACR;gBAED,KAAI,CAAC,KAAK,GAAG,GAAG,CAAC;gBACjB,KAAI,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;YACzB,CAAC,CAAC,CAAC;YAEL,OAAO,CAAC,GAAG,CAAC,CAAC,cAAc,EAAE,iBAAiB,CAAC,CAAC;iBAC7C,IAAI,CAAE;gBAEL,IAAI,KAAI,CAAC,WAAW,CAAC,MAAM,KAAK,CAAC,EAAE;oBACjC,OAAO;iBACR;gBAED,KAAI,CAAC,WAAW,CAAC,OAAO,CAAC,oBAAU;oBAEjC,IAAM,eAAe,GAAG,KAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,iBAAO,IAAI,cAAO,CAAC,IAAI,KAAK,UAAU,CAAC,IAAI,EAAhC,CAAgC,CAAC,CAAC;oBACxF,IAAI,eAAe,KAAK,SAAS,EAAE;wBACjC,OAAO;qBACR;oBAED,eAAe,CAAC,QAAQ,GAAG,IAAI,CAAC;gBAClC,CAAC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;QACP,CAAC;QAED,yCAAQ,GAAR;YAAA,iBAoBC;YAlBC,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;YAEhB,IAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,iBAAO,IAAI,cAAO,CAAC,QAAQ,KAAK,IAAI,EAAzB,CAAyB,CAAC;iBACxD,GAAG,CAAE,iBAAO;gBACX,OAAQ,OAAO,CAAC,IAAI,CAAC;YACvB,CAAC,CAAC,CAAC;YAErB,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,EAAE,QAAQ,CAAC;iBACzD,IAAI,CAAC,WAAC;gBAEL,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;YAElD,CAAC,CAAC;iBACD,KAAK,CAAC,aAAG;gBAER,KAAI,CAAC,KAAK,GAAG,GAAG,CAAC;gBACjB,KAAI,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;YACzB,CAAC,CAAC,CAAC;QACP,CAAC;QAnH0B;YAA1B,gBAAS,CAAC,cAAc,CAAC;sCAAe,+CAAqB;oEAAC;QACtC;YAAxB,gBAAS,CAAC,YAAY,CAAC;sCAAa,2CAAmB;kEAAC;QAF9C,sBAAsB;YANlC,gBAAS,CAAC;gBACT,QAAQ,EAAE,oBAAoB;;gBAE9B,aAAa,EAAE,wBAAiB,CAAC,IAAI;gBACrC,SAAS,EAAE,CAAE,gCAAc,EAAE,gCAAkB,CAAE;aAClD,CAAC;6CAaoC,gCAAc,EAA8B,gCAAkB;WAZvF,sBAAsB,CAqHlC;QAAD,6BAAC;KAAA;IArHY,wDAAsB","file":"holiday-holiday-module.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Api } from 'core/services/api.service';\n\nexport class Holiday {\n\n  id: string;\n  date: string;\n  title: string;\n  description: string;\n  mandatory: boolean;\n  selected: boolean;\n};\n\n@Injectable()\nexport class HolidayService extends Api {\n\n  private _base_url: string = '/holidays';\n\n  constructor(http: HttpClient) {\n\n    super(http);\n  }\n\n  getHolidays(year: number): Promise<Holiday[]> {\n\n    return this.get(this._base_url + '/' + year)\n      .then(response => response['data'] as Holiday[]);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { FormsModule } from '@angular/forms';\n\nimport { HolidayRoutingModule } from './holiday.routing';\nimport { ManageHolidayComponent } from './manage-holiday/manage-holiday.component';\nimport { ListHolidayComponent } from './list-holiday/list-holiday.component';\nimport { ApplicationComponentsModule } from 'modules/application-components.module';\n\n@NgModule({\n  imports: [\n    HolidayRoutingModule,\n    FormsModule,\n    HttpClientModule,\n    CommonModule,\n    ApplicationComponentsModule\n  ],\n  declarations: [\n    ListHolidayComponent,\n    ManageHolidayComponent\n  ],\n  providers: [\n  ]\n})\nexport class HolidayModule { }\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ListHolidayComponent } from './list-holiday/list-holiday.component';\nimport { ManageHolidayComponent } from './manage-holiday/manage-holiday.component';\nimport { AuthenticationGuard } from 'core/services/authentication.service';\nimport { AuthorizationGuard } from 'core/services/authorization.service';\n\nconst routes: Routes = [\n  {\n    path: '',\n    data: {\n      title: 'Holiday'\n    },\n    children: [\n      {\n        path: '',\n        redirectTo: 'list'\n      },\n      {\n        path: 'list',\n        data: {\n          title: 'List',\n          access: {\n            entity: 'organization:holiday',\n            action: 'find:get'\n          }\n        },\n        canActivate: [AuthenticationGuard, AuthorizationGuard],\n        component: ListHolidayComponent\n      },\n      {\n        path: 'manage',\n        data: {\n          title: 'Manage',\n          access: {\n            entity: 'organization:holiday',\n            action: 'update:put'\n          }\n        },\n        canActivate: [AuthenticationGuard, AuthorizationGuard],\n        component: ManageHolidayComponent\n      }\n    ]\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class HolidayRoutingModule { }\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Api } from 'core/services/api.service';\n\nexport class Holiday {\n  date: string;\n  title: string;\n};\n\n@Injectable()\nexport class HolidayService extends Api {\n\n  private _base_url: string = '/organizations/holidays';\n\n  constructor(http: HttpClient) {\n\n    super(http);\n  }\n\n  getHolidays(year: number): Promise<Holiday[]> {\n\n    return this.get(this._base_url + '/' + year.toString())\n      .then(response => response['data'] as Holiday[]);\n  }\n\n  putHolidays(year: number, holidays: string[]) {\n\n    return this.put(this._base_url + '/' + year.toString(), {\n      'holidays': holidays\n    }).then(response => response['data']);\n  }\n}\n","module.exports = \"<div class=\\\"animated fadeIn\\\">\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-12\\\">\\n      <div class=\\\"card\\\">\\n        <div class=\\\"card-body\\\">\\n\\n          <div class=\\\"row mb-4\\\" *ngIf=\\\"manageAllowed\\\">\\n            <div class=\\\"col-12\\\">\\n              <button class=\\\"btn btn-primary pull-right\\\" role='button' type=\\\"button\\\" routerLink=\\\"/organization/holiday/manage\\\">Manage Holidays</button>\\n            </div>\\n          </div>\\n\\n          <div class=\\\"row\\\">\\n            <div class=\\\"input-group col-3 mb-3\\\">\\n              <span class=\\\"input-group-prepend\\\">\\n                <span class=\\\"input-group-text\\\">Year</span>\\n              </span>\\n              <select type=\\\"number\\\" class=\\\"form-control\\\" [(ngModel)]=\\\"selectedYear\\\" (ngModelChange)=\\\"loadHolidays(selectedYear)\\\">\\n                <option *ngFor=\\\"let year of years\\\">{{year}}</option>\\n              </select>\\n            </div>\\n          </div>\\n\\n          <div class=\\\"text-center m-5\\\" *ngIf=\\\"holidays.length == 0\\\">\\n            <h3>No Holidays configured for organization</h3>\\n          </div>\\n\\n          <table class=\\\"table table-striped\\\" *ngIf=\\\"holidays.length > 0\\\">\\n            <thead>\\n              <tr>\\n                <th width=\\\"10%\\\">#</th>\\n                <th width=\\\"20%\\\">Date</th>\\n                <th width=\\\"20%\\\">Day</th>\\n                <th>Holiday</th>\\n              </tr>\\n            </thead>\\n            <tbody>\\n              <tr *ngFor=\\\"let holiday of holidays; let i = index\\\">\\n                <td>{{i+1}}.</td>\\n                <td>{{holiday.date | date: 'dd-MM-yyyy'}}</td>\\n                <td>{{holiday.date | date: 'EEEE'}}</td>\\n                <td>{{holiday.title}}</td>\\n              </tr>\\n            </tbody>\\n          </table>\\n\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"","import { Component, OnInit, ViewEncapsulation } from '@angular/core';\n\nimport { Holiday, HolidayService } from 'modules/organization/holiday/holiday.service';\nimport { Authorization } from 'core/services/authorization.service';\n\n@Component({\n  selector: 'app-list-holiday',\n  templateUrl: './list-holiday.component.html',\n  encapsulation: ViewEncapsulation.None,\n  providers: [ HolidayService ]\n})\nexport class ListHolidayComponent implements OnInit {\n\n  holidays: Holiday[] = Array();\n\n  years: Set<number> = new Set<number>();\n  selectedYear: number;\n  manageAllowed: boolean = false;\n\n  constructor(private holidayService: HolidayService, private authorization: Authorization) {\n\n    const currentYear = new Date().getFullYear();\n    const tillYears = currentYear;\n\n    // enumerate till the next year\n    for (let year = 2018; year <= tillYears; year++) {\n      this.years.add(year);\n    }\n\n    this.selectedYear = currentYear;\n  }\n\n  async ngOnInit() {\n\n    this.manageAllowed = await this.authorization.hasAccess({\n      entity: 'organization:department',\n      action: 'update:put'\n    });\n\n    this.loadHolidays(this.selectedYear);\n  }\n\n  loadHolidays(year) {\n\n    this.holidayService.getHolidays(this.selectedYear).then(holidays => this.holidays = holidays);\n  }\n}\n","module.exports = \"<div class=\\\"animated fadeIn\\\">\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-12\\\">\\n      <div class=\\\"card\\\">\\n        <div class=\\\"card-body\\\">\\n\\n          <div class=\\\"row\\\">\\n            <div class=\\\"input-group col-3 mb-3\\\">\\n              <span class=\\\"input-group-prepend\\\">\\n                <span class=\\\"input-group-text\\\">Year</span>\\n              </span>\\n              <select type=\\\"number\\\" class=\\\"form-control\\\" [(ngModel)]=\\\"selectedYear\\\" (ngModelChange)=\\\"updateHolidaysOnYearChange($event)\\\">\\n                <option *ngFor=\\\"let year of years\\\">{{year}}</option>\\n              </select>\\n            </div>\\n          </div>\\n\\n          <form class=\\\"form-horizontal\\\" #form=\\\"ngForm\\\" (ngSubmit)=\\\"onSubmit()\\\" novalidate>\\n\\n            <table class=\\\"table table-striped\\\">\\n              <thead>\\n                <tr>\\n                  <th width=\\\"5%\\\">#</th>\\n                  <th width=\\\"5%\\\"></th>\\n                  <th width=\\\"50%\\\">Name</th>\\n                  <th width=\\\"20%\\\">Date</th>\\n                  <th width=\\\"20%\\\">Day</th>\\n                </tr>\\n              </thead>\\n              <tbody>\\n                <tr *ngFor=\\\"let holiday of holidays;let i = index\\\">\\n                  <td>\\n                    {{i + 1}}.\\n                  </td>\\n                  <td>\\n                    <input type=\\\"checkbox\\\" id=\\\"holiday-{{i}}\\\" [disabled]=\\\"holiday.mandatory || isWeekend(holiday.date)\\\" [checked]=\\\"holiday.selected || holiday.mandatory\\\" (change)=\\\"holiday.selected = !holiday.selected\\\">\\n                  </td>\\n                  <td>\\n                    <label class=\\\"m-0\\\" for=\\\"holiday-{{i}}\\\">{{holiday.title}}</label>\\n                  </td>\\n                  <td>\\n                    {{holiday.date | date: 'dd-MM-yyyy'}}\\n                  </td>\\n                  <td>\\n                    {{holiday.date | date: 'EEEE'}}\\n                  </td>\\n                </tr>\\n              </tbody>\\n            </table>\\n\\n            <div class=\\\"card-body\\\">\\n              <button class=\\\"btn btn-primary btn-lg btn-block\\\">Submit</button>\\n            </div>\\n\\n          </form>\\n\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\\n<app-success-modal #successModal title=\\\"Submit\\\">\\n  <content>\\n    Updated Holidays Successfully!\\n  </content>\\n</app-success-modal>\\n<app-error-modal #errorModal title=\\\"Submit Error\\\">\\n  <content>\\n    There was an error updating holidays.\\n    <br>\\n    Details: {{error}}\\n  </content>\\n</app-error-modal>\"","import { Component, OnInit, ViewEncapsulation, ViewChild } from '@angular/core';\nimport { ModalDirective } from 'ngx-bootstrap/modal'\n\nimport { SuccessModalComponent } from 'shared/components/success-modal/success-modal.component';\nimport { ErrorModalComponent } from 'shared/components/error-modal/error-modal.component';\n\nimport { Holiday as MetaHoliday, HolidayService as MetaHolidayService } from 'modules/metadata/holiday.service';\nimport { Holiday, HolidayService } from 'modules/organization/holiday/holiday.service';\n\n@Component({\n  selector: 'app-manage-holiday',\n  templateUrl: './manage-holiday.component.html',\n  encapsulation: ViewEncapsulation.None,\n  providers: [ HolidayService, MetaHolidayService ]\n})\nexport class ManageHolidayComponent implements OnInit {\n  @ViewChild('successModal') successModal: SuccessModalComponent;\n  @ViewChild('errorModal') errorModal: ErrorModalComponent;\n\n  holidays: MetaHoliday[] = Array();\n  years: Set<number> = new Set<number>();\n\n  orgHolidays: Holiday[] = Array();\n  selectedYear: number;\n\n  error: string = '';\n\n  constructor(private holidayService: HolidayService, private metaHolidayService: MetaHolidayService) {\n\n    const currentYear = new Date().getFullYear();\n    const tillYears = currentYear + (new Date().getMonth() > 10 ? 1 : 0);\n\n    // enumerate till the next year\n    for (let year = 2018; year <= tillYears; year++) {\n      this.years.add(year);\n    }\n\n    this.selectedYear = currentYear;\n    this.updateHolidaysOnYearChange();\n  }\n\n  ngOnInit() { }\n\n  isWeekend(date: string) {\n\n    const parsed_date = new Date(date);\n    return parsed_date.getDay() === 0;\n  }\n\n  updateHolidaysOnYearChange () {\n\n    this.holidays = Array();\n    this.orgHolidays = Array();\n\n    const holidayPromise = this.metaHolidayService.getHolidays(this.selectedYear)\n      .then(holidays => this.holidays = holidays)\n      .catch(err => {\n\n        // if no holidays found -- we just handled that -- don't pop up the modal\n        if (err.status === 404) {\n          return;\n        }\n\n        this.error = err;\n        this.errorModal.show();\n      });\n\n    const orgHolidayPromise = this.holidayService.getHolidays(this.selectedYear)\n      .then(holidays => {\n\n        if (holidays === undefined) {\n          return;\n        }\n\n        holidays.forEach (holiday => {\n          this.orgHolidays.push ({\n            date: holiday.date,\n            title: holiday.title\n          } as Holiday)\n        });\n      })\n      .catch(err => {\n\n        // if no holidays found -- we just handled that -- don't pop up the modal\n        if (err.status === 404) {\n          return;\n        }\n\n        this.error = err;\n        this.errorModal.show();\n      });\n\n    Promise.all([holidayPromise, orgHolidayPromise])\n      .then (() => {\n\n        if (this.orgHolidays.length === 0) {\n          return;\n        }\n\n        this.orgHolidays.forEach(orgHoliday => {\n\n          const selectedHoliday = this.holidays.find(holiday => holiday.date === orgHoliday.date);\n          if (selectedHoliday === undefined) {\n            return;\n          }\n\n          selectedHoliday.selected = true;\n        });\n      });\n  }\n\n  onSubmit() {\n\n    this.error = '';\n\n    const holidays = this.holidays.filter(holiday => holiday.selected === true)\n                      .map (holiday => {\n                        return  holiday.date;\n                      });\n\n    this.holidayService.putHolidays(this.selectedYear, holidays)\n      .then(x => {\n\n        this.successModal.show('/organization/holiday');\n\n      })\n      .catch(err => {\n\n        this.error = err;\n        this.errorModal.show();\n      });\n  }\n}\n"],"sourceRoot":""}