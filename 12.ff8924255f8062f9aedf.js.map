{"version":3,"sources":["webpack:///./src/app/config/constants/leave-policy.ts","webpack:///./src/app/modules/leave/policy/leave-policy.module.ts","webpack:///./src/app/modules/leave/policy/leave-policy.routing.ts","webpack:///./src/app/modules/leave/policy/list-leave-policy/list-leave-policy.component.html","webpack:///./src/app/modules/leave/policy/list-leave-policy/list-leave-policy.component.ts","webpack:///./src/app/modules/leave/policy/manage-leave-policy/manage-leave-policy.component.html","webpack:///./src/app/modules/leave/policy/manage-leave-policy/manage-leave-policy.component.ts"],"names":[],"mappings":"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","file":"12.ff8924255f8062f9aedf.js","sourcesContent":["export enum STATUS {\n  INACTIVE, ACTIVE, SCHEDULED, EXPIRED\n};\n\nexport enum OPERATION {\n  CREATE = 1,\n  ACTIVATE, EXPIRE\n};\n\nexport enum ALLOCATION {\n  ONE_TIME = 1,\n  QUARTERLY, MONTHLY, ON_DEMAND\n};\n\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { FormsModule } from '@angular/forms';\nimport { BsDatepickerModule } from 'ngx-bootstrap/datepicker';\nimport { TooltipModule } from 'ngx-bootstrap/tooltip';\n\nimport { LeavePolicyRoutingModule } from './leave-policy.routing';\nimport { ListLeavePolicyComponent } from './list-leave-policy/list-leave-policy.component';\nimport { ManageLeavePolicyComponent } from './manage-leave-policy/manage-leave-policy.component';\nimport { ApplicationComponentsModule } from 'modules/application-components.module';\nimport { ApplicationDirectivesModule } from 'modules/application-directives.module';\nimport { ApplicationPipesModule } from 'modules/application-pipes.module';\nimport { NgSelectModule } from '@ng-select/ng-select';\n\n@NgModule({\n  imports: [\n    LeavePolicyRoutingModule,\n    FormsModule,\n    HttpClientModule,\n    CommonModule,\n    BsDatepickerModule,\n    TooltipModule,\n    NgSelectModule,\n    ApplicationComponentsModule,\n    ApplicationDirectivesModule,\n    ApplicationPipesModule\n  ],\n  declarations: [\n    ListLeavePolicyComponent,\n    ManageLeavePolicyComponent\n  ],\n  providers: [\n  ]\n})\nexport class LeavePolicyModule { }\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { AuthenticationGuard } from 'core/services/authentication.service';\nimport { AuthorizationGuard } from 'core/services/authorization.service';\nimport { ManageLeavePolicyComponent } from './manage-leave-policy/manage-leave-policy.component';\nimport { ListLeavePolicyComponent } from './list-leave-policy/list-leave-policy.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    data: {\n      title: 'Policy'\n    },\n    children: [\n      {\n        path: '',\n        redirectTo: 'list'\n      },\n      {\n        path: 'list',\n        data: {\n          title: 'List',\n          access: {\n            entity: 'leave:policy',\n            action: 'find:get'\n          }\n        },\n        canActivate: [AuthenticationGuard, AuthorizationGuard],\n        component: ListLeavePolicyComponent\n      },\n      {\n        path: 'add',\n        canActivate: [AuthenticationGuard, AuthorizationGuard],\n        data: {\n          title: 'Add',\n          access: {\n            entity: 'leave:policy',\n            action: 'create:post'\n          }\n        },\n        component: ManageLeavePolicyComponent\n      }\n    ]\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class LeavePolicyRoutingModule { }\n","module.exports = \"<div class=\\\"animated fadeIn\\\">\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-12\\\">\\n      <div class=\\\"card\\\">\\n        <div class=\\\"card-body\\\">\\n\\n          <div class=\\\"row mb-4\\\">\\n            <div class=\\\"col-12\\\">\\n              <button class=\\\"btn btn-primary pull-right\\\" role='button' type=\\\"button\\\" routerLink=\\\"/leave/policy/add\\\">+ Add Leave Policy</button>\\n            </div>\\n          </div>\\n\\n          <div class=\\\"row\\\">\\n            <div class=\\\"col-12\\\">\\n              <div class=\\\"text-center m-5\\\" *ngIf=\\\"leave_policies.length == 0\\\">\\n                <h3>No Leave Policies in organization</h3>\\n              </div>\\n              <table class=\\\"table table-striped\\\" *ngIf=\\\"leave_policies.length > 0\\\">\\n                <thead>\\n                  <tr>\\n                    <th rowspan=\\\"2\\\" width=\\\"5%\\\">#</th>\\n                    <th rowspan=\\\"2\\\">Duration</th>\\n                    <th rowspan=\\\"2\\\">Approval</th>\\n                    <th colspan=\\\"5\\\" class=\\\"text-center\\\">Leaves</th>\\n                    <th rowspan=\\\"2\\\">Status</th>\\n                  </tr>\\n                  <tr>\\n                    <th>Leave Type</th>\\n                    <th>Count</th>\\n                    <th>Sandwich</th>\\n                    <th>Allocation</th>\\n                    <th>Carry Forward<br/>(Maximum Count)</th>\\n                  </tr>\\n                </thead>\\n                <tbody>\\n                  <ng-template ngFor let-policy [ngForOf]=\\\"leave_policies\\\" let-i=\\\"index\\\">\\n                    <tr *ngFor=\\\"let leave of policy.leaves; let first = first\\\">\\n                      <td>\\n                        <span *ngIf=\\\"first\\\">{{i+1}}.</span>\\n                      </td>\\n                      <td>\\n                        <span *ngIf=\\\"first\\\">\\n                          Start Date - {{policy.start_date | date: 'dd-MM-yyyy'}}\\n                          <br /> End Date - {{policy.end_date | date: 'dd-MM-yyyy'}}\\n                        </span>\\n                      </td>\\n                      <td>\\n                        <span *ngIf=\\\"first\\\">\\n                          <span *ngIf=\\\"!policy.approval || !policy.approval.required\\\">Not Required</span>\\n                          <span *ngIf=\\\"policy.approval && policy.approval.required\\\">\\n                            <span *ngIf=\\\"policy.approval.from_supervisor\\\">From Supervisor</span>\\n                            <br/>\\n                            <span *ngIf=\\\"policy.approval.users && policy.approval.users.length > 0\\\">From selected Users</span>\\n                          </span>\\n                        </span>\\n                      </td>\\n                      <td>{{leave.leave_type | constants: 'leave.type'}}</td>\\n                      <td>{{leave.count}}</td>\\n                      <td>{{leave.sandwich ? 'Yes' : 'No'}}</td>\\n                      <td>{{leave.allocation | constants: 'leave_policy.allocation'}}</td>\\n                      <td>\\n                        <span *ngIf=\\\"leave.carry_forward\\\">Yes ({{leave.maximum_count}})</span>\\n                        <span *ngIf=\\\"!leave.carry_forward\\\">No</span>\\n                      </td>\\n                      <td>\\n                        <span *ngIf=\\\"first\\\" class=\\\"badge\\\" [ngClass]=\\\"getStatusBadge(policy.leave_policy_status)\\\">\\n                          {{policy.leave_policy_status | constants: 'leave_policy.status'}}\\n                        </span>\\n                      </td>\\n                    </tr>\\n                  </ng-template>\\n                </tbody>\\n              </table>\\n            </div>\\n          </div>\\n\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"","import { Component, OnInit, ViewEncapsulation, ViewChild } from '@angular/core';\n\nimport { LeavePolicyElement, LeavePolicyService } from 'modules/leave/policy/leave-policy.service';\n\n@Component({\n  selector: 'app-leave-policy-list',\n  templateUrl: './list-leave-policy.component.html',\n  encapsulation: ViewEncapsulation.None,\n  providers: [ LeavePolicyService ]\n})\nexport class ListLeavePolicyComponent implements OnInit {\n\n  leave_policies: LeavePolicyElement [];\n  error: string;\n\n  leave_type_value: Object;\n\n  constructor(private leavePolicyService: LeavePolicyService) {\n\n    this.leave_policies = [];\n    this.error = '';\n  }\n\n  ngOnInit() {\n\n    this.leavePolicyService.getPolicy ()\n    .then (policies => {\n      this.leave_policies = policies;\n    })\n    .catch(err => {\n      this.error = err;\n    });\n  }\n\n  getStatusBadge(status) {\n\n    switch (status) {\n\n      case 1: return 'badge-success';\n      case 2: return 'badge-warning';\n      case 3: return 'badge-danger';\n      default: return 'badge-default';\n    }\n  }\n}\n","module.exports = \"<div class=\\\"animated fadeIn\\\">\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-12\\\">\\n      <div class=\\\"card\\\">\\n        <div class=\\\"card-body\\\">\\n\\n          <div class=\\\"row\\\">\\n            <div class=\\\"col-12\\\">\\n\\n              <form #leavePolicyForm=\\\"ngForm\\\">\\n\\n                <div class=\\\"form-group row\\\">\\n                  <label class=\\\"col-3 col-form-label\\\">Start Date</label>\\n                  <div class=\\\"col-3 input-group\\\">\\n                    <input type=\\\"text\\\" name=\\\"start-date\\\" class=\\\"form-control\\\" id=\\\"start-date\\\" [(ngModel)]=\\\"leave_policy.start_date\\\" bsDatepicker #startDate=\\\"bsDatepicker\\\" [bsConfig]=\\\"sdConfig\\\" (bsValueChange)=\\\"setPolicyStartDate($event)\\\">\\n                    <span class=\\\"input-group-append\\\">\\n                      <button class=\\\"btn\\\" (click)=\\\"startDate.show()\\\" [attr.aria-expanded]=\\\"startDate.isOpen\\\">\\n                        <i class=\\\"fa fa-calendar\\\"></i>\\n                      </button>\\n                    </span>\\n                  </div>\\n\\n                  <label class=\\\"col-3 col-form-label\\\">End Date</label>\\n                  <div class=\\\"col-3 input-group\\\">\\n                    <input type=\\\"text\\\" name=\\\"end-date\\\" class=\\\"form-control\\\" id=\\\"end-date\\\" [(ngModel)]=\\\"leave_policy.end_date\\\" bsDatepicker #endDate=\\\"bsDatepicker\\\" [bsConfig]=\\\"edConfig\\\">\\n                    <span class=\\\"input-group-append\\\">\\n                      <button class=\\\"btn\\\" (click)=\\\"endDate.show()\\\" [attr.aria-expanded]=\\\"endDate.isOpen\\\">\\n                        <i class=\\\"fa fa-calendar\\\"></i>\\n                      </button>\\n                    </span>\\n                  </div>\\n                </div>\\n\\n                <div class=\\\"form-group row\\\">\\n\\n                  <label class=\\\"col-3 col-form-label\\\">Approval</label>\\n                  <div class=\\\"col-3\\\">\\n                    <div class=\\\"form-check\\\">\\n                      <input type=\\\"checkbox\\\" name=\\\"approval-supervisor\\\" class=\\\"form-check-input\\\" id=\\\"approval-supervisor\\\" value=\\\"true\\\" [(ngModel)]=\\\"leave_policy.approval.from_supervisor\\\">\\n                      <label class=\\\"form-check-label\\\" for=\\\"approval-supervisor\\\">Approval from Supervisor</label>\\n                    </div>\\n                  </div>\\n\\n                </div>\\n\\n                <div class=\\\"form-group row\\\">\\n\\n                  <div class=\\\"offset-3 col-3\\\">\\n                    <div class=\\\"form-check\\\">\\n                      <input type=\\\"checkbox\\\" name=\\\"approval-users\\\" class=\\\"form-check-input\\\" id=\\\"approval-users\\\" value=\\\"true\\\" [(ngModel)]=\\\"from_users\\\">\\n                      <label class=\\\"form-check-label\\\" for=\\\"approval-users\\\">Approval from selected Users</label>\\n                    </div>\\n                  </div>\\n\\n                  <div class=\\\"col-6\\\">\\n                    <ng-select name=\\\"users\\\" [loading]=\\\"loading_users\\\" [items]=\\\"user_list\\\" [multiple]=\\\"true\\\" [addTag]=\\\"false\\\" [closeOnSelect]=\\\"false\\\"\\n                      [clearable]=\\\"true\\\" [searchable]=\\\"true\\\" [searchFn]=\\\"filterUsers\\\" [clearSearchOnAdd]=\\\"true\\\" [hideSelected]=\\\"true\\\" bindLabel=\\\"name\\\" bindValue=\\\"user_id\\\" placeholder=\\\"Select Users\\\" notFoundText=\\\"No user found\\\" [disabled]=\\\"!from_users\\\"\\n                      [(ngModel)]=\\\"leave_policy.approval.users\\\" #users=\\\"ngModel\\\">\\n\\n                      <ng-template ng-option-tmp let-item=\\\"item\\\" let-index=\\\"index\\\" let-search=\\\"searchTerm\\\">\\n                        {{item.name}} <{{item.email_id}}>\\n                      </ng-template>\\n\\n                    </ng-select>\\n                  </div>\\n\\n                </div>\\n\\n                <div class=\\\"form-group row\\\">\\n\\n                  <label class=\\\"col-3 col-form-label\\\">\\n                    Allowed Back Days&nbsp;\\n                    <i class=\\\"fa fa-question-circle\\\" tooltip=\\\"Leaves can be applied these many days after taking leave\\\" placement=\\\"bottom\\\"></i>\\n                  </label>\\n                  <div class=\\\"col-3\\\">\\n                    <input type=\\\"text\\\" name=\\\"allowed-back-days\\\" id=\\\"allowed-back-days\\\" class=\\\"form-control\\\" [(ngModel)]=\\\"leave_policy.allowed_back_days\\\" />\\n                  </div>\\n\\n                  <label class=\\\"col-3 col-form-label\\\">\\n                    Reiterate&nbsp;\\n                    <i class=\\\"fa fa-question-circle\\\" tooltip=\\\"Same policy will be applied again for the same time period when the current one ends\\\" placement=\\\"bottom\\\"></i>\\n                  </label>\\n                  <div class=\\\"col-3\\\">\\n                    <div class=\\\"form-check\\\">\\n                      <input type=\\\"checkbox\\\" name=\\\"reiterate\\\" class=\\\"form-check-input\\\" id=\\\"reiterate\\\" value=\\\"true\\\" [(ngModel)]=\\\"leave_policy.reiterate\\\">\\n                      <label class=\\\"form-check-label\\\" for=\\\"reiterate\\\">Apply same Leave Policy in next iteration</label>\\n                    </div>\\n                  </div>\\n\\n                </div>\\n\\n                <div *ngFor=\\\"let leave of leave_policy.leaves; let i = index; let last = last;\\\" class=\\\"card\\\">\\n\\n                  <div class=\\\"card-header\\\">\\n                    <div class=\\\"row\\\">\\n                      <div class=\\\"col-9\\\">\\n                        <h4 class=\\\"mt-2\\\">\\n                          Leave :\\n                          <span *ngIf=\\\"leave.leave_type\\\">{{leave.leave_type | constants: 'leave.type'}} | </span>\\n                          <span *ngIf=\\\"leave.count\\\">{{leave.count}} Leave(s) | </span>\\n                          <span *ngIf=\\\"leave.allocation\\\">{{leave.allocation | constants: 'leave_policy.allocation'}} | </span>\\n                          <span *ngIf=\\\"leave.compensatory_off && leave.compensatory_off.expiry.type\\\">Expire: {{leave.compensatory_off.expiry.type | constants: 'compensatory_off.expiry'}} | </span>\\n                        </h4>\\n                      </div>\\n                      <div class=\\\"col-3 text-right\\\">\\n                        <button class=\\\"btn\\\" (click)=\\\"addLeave()\\\">\\n                          <i class=\\\"fa fa-plus\\\"></i>\\n                        </button>\\n                        <button class=\\\"btn\\\" (click)=\\\"toggleLeave(i)\\\">\\n                          <i class=\\\"fa\\\" [ngClass]=\\\"{'fa-caret-up': leave_block[i], 'fa-caret-down': !leave_block[i]}\\\"></i>\\n                        </button>\\n                        <button *ngIf=\\\"leave_policy.leaves.length > 1\\\" class=\\\"btn\\\" (click)=\\\"removeLeave(i)\\\">\\n                          <i class=\\\"fa fa-close\\\"></i>\\n                        </button>\\n                      </div>\\n                    </div>\\n                  </div>\\n\\n                  <div class=\\\"card-body\\\" [ngClass]=\\\"{'collapse': !leave_block[i]}\\\">\\n\\n                    <div class=\\\"form-group row\\\">\\n\\n                      <label class=\\\"col-3 col-form-label\\\">Leave Type</label>\\n                      <div class=\\\"col-3\\\">\\n                        <select name=\\\"leave-type-{{i}}\\\" id=\\\"leave-type-{{i}}\\\" class=\\\"form-control\\\" [(ngModel)]=\\\"leave.leave_type\\\" (change)=\\\"changeLeaveType(leave)\\\">\\n                          <option *ngFor=\\\"let type of leave_type | constantsarray\\\" [ngValue]=\\\"type\\\">\\n                            {{ type | constants: 'leave.type' }}\\n                          </option>\\n                        </select>\\n                      </div>\\n\\n                      <label class=\\\"col-3 col-form-label\\\" [hidden]=\\\"isCompOff(leave)\\\">Count</label>\\n                      <div class=\\\"col-3\\\" [hidden]=\\\"isCompOff(leave)\\\">\\n                        <input type=\\\"text\\\" name=\\\"count-{{i}}\\\" id=\\\"count-{{i}}\\\" class=\\\"form-control\\\" [(ngModel)]=\\\"leave.count\\\" />\\n                      </div>\\n\\n                    </div>\\n\\n                    <div class=\\\"form-group row\\\" [hidden]=\\\"isCompOff(leave)\\\">\\n\\n                      <label class=\\\"col-3 col-form-label\\\">Allocation</label>\\n                      <div class=\\\"col-3\\\">\\n                        <select name=\\\"allocation-{{i}}\\\" id=\\\"allocation-{{i}}\\\" class=\\\"form-control\\\" [(ngModel)]=\\\"leave.allocation\\\">\\n                          <option *ngFor=\\\"let allocation of leave_allocation | constantsarray\\\" [ngValue]=\\\"allocation\\\">\\n                            {{ allocation | constants: 'leave_policy.allocation' }}\\n                          </option>\\n                        </select>\\n                      </div>\\n\\n                      <label class=\\\"col-3 col-form-label\\\">\\n                        Loaned Count&nbsp;\\n                        <i class=\\\"fa fa-question-circle\\\" tooltip=\\\"If employee runs out of leaves, these many can be loaned in advance\\\"\\n                          placement=\\\"bottom\\\"></i>\\n                      </label>\\n                      <div class=\\\"col-3\\\">\\n                        <input type=\\\"text\\\" name=\\\"loaned-count-{{i}}\\\" id=\\\"loaned-count-{{i}}\\\" class=\\\"form-control\\\" [(ngModel)]=\\\"leave.loaned_count\\\" />\\n                      </div>\\n\\n                    </div>\\n\\n                    <div class=\\\"form-group row\\\" [hidden]=\\\"isCompOff(leave)\\\">\\n\\n                      <label class=\\\"col-3 col-form-label\\\">\\n                        Carry-Forward&nbsp;\\n                        <i class=\\\"fa fa-question-circle\\\" tooltip=\\\"When current leave policy ends, all pending leaves will be carry-forwarded to next iteration of leave policy\\\" placement=\\\"bottom\\\"></i>\\n                      </label>\\n                      <div class=\\\"col-3\\\">\\n                        <div class=\\\"form-check\\\">\\n                          <input type=\\\"checkbox\\\" name=\\\"carry-forward-{{i}}\\\" class=\\\"form-check-input\\\" id=\\\"carry-forward-{{i}}\\\" value=\\\"true\\\" [(ngModel)]=\\\"leave.carry_forward\\\">\\n                          <label class=\\\"form-check-label\\\" for=\\\"carry-forward\\\">Carry-Forward pending leaves to next iteration</label>\\n                        </div>\\n                      </div>\\n\\n                      <label class=\\\"col-3 col-form-label\\\">\\n                        Maximum Count&nbsp;\\n                        <i class=\\\"fa fa-question-circle\\\" tooltip=\\\"When leaves are carry-forwarded, maximum leaves that employee can be allocated (including the ones that was carry-forward)\\\"\\n                          placement=\\\"bottom\\\"></i>\\n                      </label>\\n                      <div class=\\\"col-3\\\">\\n                        <input type=\\\"text\\\" name=\\\"maximum-count-{{i}}\\\" id=\\\"maximum-count-{{i}}\\\" class=\\\"form-control\\\" [(ngModel)]=\\\"leave.maximum_count\\\" [disabled]=\\\"!leave.carry_forward\\\" />\\n                      </div>\\n\\n                    </div>\\n\\n                    <div class=\\\"form-group row\\\">\\n\\n                      <label class=\\\"col-3 col-form-label\\\">Sandwich</label>\\n                      <div class=\\\"col-3\\\">\\n                        <div class=\\\"form-check\\\">\\n                          <input type=\\\"checkbox\\\" name=\\\"sandwich-{{i}}\\\" class=\\\"form-check-input\\\" id=\\\"sandwich-{{i}}\\\" value=\\\"true\\\" [(ngModel)]=\\\"leave.sandwich\\\">\\n                          <label class=\\\"form-check-label\\\" for=\\\"sandwich-{{i}}\\\">Sandwich leaves on weekend and holidays</label>\\n                        </div>\\n                      </div>\\n\\n                      <label class=\\\"col-3 col-form-label\\\" *ngIf=\\\"isCompOff(leave)\\\">\\n                        Comp-Off Expiry\\n                        <i class=\\\"fa fa-question-circle\\\" tooltip=\\\"Approved Comp-Offs will expire after selected time-period if not availed\\\"\\n                          placement=\\\"bottom\\\"></i>\\n                      </label>\\n                      <div class=\\\"col-3\\\" *ngIf=\\\"isCompOff(leave)\\\">\\n                        <div class=\\\"input-group\\\">\\n\\n                          <select name=\\\"expiry-type-{{i}}\\\" id=\\\"expiry-type-{{i}}\\\" class=\\\"form-control\\\" [(ngModel)]=\\\"leave.compensatory_off.expiry.type\\\">\\n                            <option *ngFor=\\\"let expiry of compoff_expiry | constantsarray\\\" [ngValue]=\\\"expiry\\\">\\n                              {{ expiry | constants: 'compensatory_off.expiry' }}\\n                            </option>\\n                          </select>\\n                          <input type=\\\"text\\\" name=\\\"expiry-count-{{i}}\\\" id=\\\"expiry-count-{{i}}\\\" class=\\\"form-control\\\" [(ngModel)]=\\\"leave.compensatory_off.expiry.count\\\"\\n                            [hidden]=\\\"!showExpiryCount(leave)\\\" />\\n\\n                        </div>\\n                      </div>\\n\\n                    </div>\\n\\n                    <div class=\\\"form-group row\\\" *ngIf=\\\"isCompOff(leave)\\\">\\n\\n                      <label class=\\\"col-3 col-form-label\\\">\\n                        Approval\\n                        <i class=\\\"fa fa-question-circle\\\" tooltip=\\\"Compensatory-Off must be applied for and approved before it can be availed\\\" placement=\\\"bottom\\\"></i>\\n                      </label>\\n                      <div class=\\\"col-3\\\">\\n                        <div class=\\\"form-check\\\">\\n                          <input type=\\\"checkbox\\\" name=\\\"compoff-approval-supervisor-{{i}}\\\" class=\\\"form-check-input\\\" id=\\\"compoff-approval-supervisor-{{i}}\\\" value=\\\"true\\\"\\n                            [(ngModel)]=\\\"leave.compensatory_off.approval.from_supervisor\\\">\\n                          <label class=\\\"form-check-label\\\" for=\\\"compoff-approval-supervisor-{{i}}\\\">Approval from Supervisor</label>\\n                        </div>\\n                      </div>\\n\\n                    </div>\\n\\n                    <div class=\\\"form-group row\\\" *ngIf=\\\"isCompOff(leave)\\\">\\n\\n                      <div class=\\\"offset-3 col-3\\\">\\n                        <div class=\\\"form-check\\\">\\n                          <input type=\\\"checkbox\\\" name=\\\"compoff-approval-users-{{i}}\\\" class=\\\"form-check-input\\\" id=\\\"compoff-approval-users-{{i}}\\\" value=\\\"true\\\"\\n                            [(ngModel)]=\\\"from_users_compoff\\\">\\n                          <label class=\\\"form-check-label\\\" for=\\\"compoff-approval-users-{{i}}\\\">Approval from selected Users</label>\\n                        </div>\\n                      </div>\\n\\n                      <div class=\\\"col-6\\\">\\n                        <ng-select name=\\\"compoffusers\\\" [loading]=\\\"loading_users\\\" [items]=\\\"user_list\\\" [multiple]=\\\"true\\\" [addTag]=\\\"false\\\"\\n                          [closeOnSelect]=\\\"false\\\" [clearable]=\\\"true\\\" [searchable]=\\\"true\\\" [searchFn]=\\\"filterUsers\\\" [clearSearchOnAdd]=\\\"true\\\"\\n                          [hideSelected]=\\\"true\\\" bindLabel=\\\"name\\\" bindValue=\\\"user_id\\\" placeholder=\\\"Select Users\\\" notFoundText=\\\"No user found\\\"\\n                          [disabled]=\\\"!from_users_compoff\\\" [(ngModel)]=\\\"leave.compensatory_off.approval.users\\\" #compoffusers=\\\"ngModel\\\">\\n\\n                          <ng-template ng-option-tmp let-item=\\\"item\\\" let-index=\\\"index\\\" let-search=\\\"searchTerm\\\">\\n                            {{item.name}} <{{item.email_id}}>\\n                          </ng-template>\\n\\n                        </ng-select>\\n                      </div>\\n\\n                    </div>\\n\\n                  </div>\\n                </div>\\n\\n              </form>\\n\\n              <div class=\\\"form-actions row mt-4\\\">\\n                <div class=\\\"col-12\\\">\\n                  <button type=\\\"button\\\" class=\\\"btn btn-link pull-right\\\" routerLink=\\\"/leave/policy\\\">Cancel</button>\\n                  <button [disabled]=\\\"!leavePolicyForm.valid\\\" type=\\\"submit\\\" class=\\\"btn btn-primary pull-right\\\" (click)=\\\"saveLeavePolicy()\\\">Submit</button>\\n                </div>\\n              </div>\\n\\n            </div>\\n          </div>\\n\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\\n<app-success-modal #successModal title=\\\"Success!\\\">\\n  <content>\\n    {{ !updating_leave_policy ? \\\"Created\\\" : \\\"Updated\\\" }} Leave Policy Successfully\\n  </content>\\n</app-success-modal>\\n\\n<app-error-modal #errorModal title=\\\"Error!\\\">\\n  <content>\\n    <p>There was an error {{ !updating_leave_policy ? \\\"creating\\\" : \\\"updating\\\" }} Leave Policy. {{error}}</p>\\n    <ul>\\n      <li *ngFor=\\\"let attribute of invalid_attributes \\\">{{attribute}}</li>\\n    </ul>\\n  </content>\\n</app-error-modal>\"","import { Component, OnInit, ViewEncapsulation, ViewChild } from '@angular/core';\nimport { DatePipe } from '@angular/common';\n\nimport { TYPE } from 'config/constants/leave';\nimport { ALLOCATION } from 'config/constants/leave-policy';\n\nimport { SuccessModalComponent } from 'shared/components/success-modal/success-modal.component';\nimport { ErrorModalComponent } from 'shared/components/error-modal/error-modal.component';\nimport { LeavePolicy, LeavePolicyService, CompensatoryOff } from 'modules/leave/policy/leave-policy.service';\nimport { Name } from 'modules/user/profile/profile.service';\nimport { EmployeeService } from 'modules/employee/employee.service';\nimport { EXPIRY } from 'config/constants/compensatory-off';\nimport { BsDatepickerDirective } from 'ngx-bootstrap';\nimport Utility from 'shared/helpers/utility';\nimport { Authorization } from 'core/services/authorization.service';\n\nclass UserSearchItem {\n\n  user_id: string;\n  name: string;\n  email_id: string;\n}\n\nconst error_map = {\n  start_date: 'Start Date',\n  end_date: 'End Date',\n  leave_type: 'Leave Type',\n  count: 'Count',\n  carry_forward: 'Carry Forward',\n  maximum_count: 'Maximum Count',\n  loaned_count: 'Loaned Count',\n  sandwich: 'Sandwich',\n  allowed_back_days: 'Allowed Back Days',\n  allocation: 'Allocation'\n};\n\n@Component({\n  selector: 'app-manage-leaves-policy',\n  templateUrl: './manage-leave-policy.component.html',\n  encapsulation: ViewEncapsulation.None,\n  providers: [LeavePolicyService, EmployeeService, DatePipe, Authorization]\n})\nexport class ManageLeavePolicyComponent implements OnInit {\n  @ViewChild('errorModal') errorModal: ErrorModalComponent;\n  @ViewChild('successModal') successModal: SuccessModalComponent;\n  @ViewChild('startDate') startDate: BsDatepickerDirective;\n  @ViewChild('endDate') endDate: BsDatepickerDirective;\n\n  leave_policy: LeavePolicy;\n  error: string;\n\n  leave_type;\n  leave_allocation;\n  compoff_expiry;\n\n  from_users: boolean = false;\n  from_users_compoff: boolean = false;\n  user_list: UserSearchItem[] = [];\n  loading_users: boolean = false;\n\n  updating_leave_policy: boolean;\n  leave_block: Array<boolean>;\n  invalid_attributes: Array<string>;\n\n  sdConfig: Object;\n  edConfig: Object;\n\n  constructor(\n    private leavePolicyService: LeavePolicyService,\n    private employeeService: EmployeeService,\n    private datePipe: DatePipe,\n    private authorization: Authorization\n  ) {\n\n    this.leave_policy = new LeavePolicy();\n    this.error = '';\n    this.leave_block = [true];\n\n    this.updating_leave_policy = false;\n    this.invalid_attributes = [];\n\n    const current_date = new Date();\n    current_date.setDate(current_date.getDate() + 1);\n    this.sdConfig = {\n      minDate: current_date,\n      dateInputFormat: 'YYYY-MM-DD',\n      containerClass: 'theme-blue',\n      showWeekNumbers: false\n    };\n    this.edConfig = {\n      minDate: current_date,\n      dateInputFormat: 'YYYY-MM-DD',\n      containerClass: 'theme-blue',\n      showWeekNumbers: false\n    };\n  }\n\n  async ngOnInit() {\n\n    this.__loadUsers();\n\n    const compOfEnabled = await this.authorization.hasAccess({\n      entity: 'leave:compensatory_off',\n      action: 'find:get'\n    });\n\n    this.leave_type = Utility.copy(TYPE);\n    this.leave_allocation = Utility.copy(ALLOCATION);\n    this.compoff_expiry = Utility.copy(EXPIRY);\n\n    delete (this.leave_type as any).PL;\n    delete (this.leave_type as any).ML;\n    delete (this.leave_type as any).LWP;\n    delete (this.leave_allocation as any).ON_DEMAND;\n    if (!compOfEnabled) {\n      delete (this.leave_type as any).COMP;\n    }\n  }\n\n  private __validate() {\n    return true;\n  }\n\n  private __loadUsers() {\n\n    this.loading_users = true;\n    this.employeeService.getEmployees(null, 0, 0, ['email_id', 'name'])\n      .then(response => {\n\n        this.user_list = response.users.map(user => {\n\n          const item = new UserSearchItem();\n          item.user_id = user._id;\n          item.email_id = user.email_id;\n          item.name = Name.getFullName(user.name);\n          return item;\n        });\n        this.loading_users = false;\n\n      }).catch(err => {\n\n        this.error = err.error.message.text;\n        this.errorModal.show();\n      });\n  }\n\n  private __sanitizeLeavePolicy(leavePolicy) {\n\n    if (leavePolicy.start_date !== undefined) {\n      leavePolicy.start_date = this.datePipe.transform(leavePolicy.start_date, 'yyyy-MM-dd');\n    }\n\n    if (leavePolicy.end_date !== undefined) {\n      leavePolicy.end_date = this.datePipe.transform(leavePolicy.end_date, 'yyyy-MM-dd');\n    }\n\n    const approval = leavePolicy.approval;\n    if (approval && (approval.from_supervisor || (approval.users && approval.users.length > 0))) {\n      leavePolicy.approval.required = true;\n    } else {\n      leavePolicy.approval = {\n        required: false\n      };\n    }\n\n    return leavePolicy;\n  }\n\n  saveLeavePolicy() {\n\n    if (this.__validate()) {\n\n      let leave_policy = JSON.parse(JSON.stringify(this.leave_policy));\n      leave_policy = this.__sanitizeLeavePolicy(leave_policy);\n      this.error = '';\n      this.invalid_attributes = [];\n\n      this.leavePolicyService.postPolicy(leave_policy).then(data => {\n\n        this.successModal.show('/leave/policy');\n\n      }).catch(err => {\n\n        this.error = err.error.message.text;\n        if (err.error.invalid_attributes) {\n          for (const key in err.error.invalid_attributes) {\n            if (err.error.invalid_attributes.hasOwnProperty(key)) {\n              this.invalid_attributes.push(error_map[key] ? error_map[key] : err.error.invalid_attributes[key]);\n            }\n          }\n        }\n        this.errorModal.show();\n      });\n    }\n  }\n\n  addLeave() {\n\n    this.leave_policy.addLeave();\n    this.leave_block.push(true);\n  }\n\n  removeLeave(index) {\n\n    this.leave_policy.removeLeave(index);\n    this.leave_block.splice(index, 1);\n  }\n\n  toggleLeave(index) {\n\n    this.leave_block[index] = !this.leave_block[index];\n  }\n\n  filterUsers(term: string, item: UserSearchItem) {\n\n    const regex = new RegExp(term, 'i');\n    return item.email_id.match(regex) || item.name.match(regex);\n  }\n\n  changeLeaveType(leave) {\n\n    if (leave.leave_type === TYPE.COMP) {\n\n      leave.allocation = ALLOCATION.ON_DEMAND;\n      leave.count = 0;\n      leave.loaned_count = 0;\n      leave.compensatory_off = new CompensatoryOff();\n\n    } else {\n\n      leave.allocation = null;\n      leave.compensatory_off = null;\n    }\n  }\n\n  isCompOff(leave) {\n\n    if (leave.leave_type === TYPE.COMP) {\n      return true;\n    }\n    return false;\n  }\n\n  showExpiryCount(leave) {\n\n    const allowed_count_expiry = [EXPIRY.AFTER_MONTH, EXPIRY.AFTER_DAY];\n\n    if (allowed_count_expiry.indexOf(parseInt(leave.compensatory_off.expiry.type, 10)) !== -1) {\n      return true;\n    }\n    return false;\n  }\n\n  setPolicyStartDate(value: Date) {\n\n    this.edConfig['minDate'] = value;\n    this.endDate.setConfig();\n  }\n}\n"],"sourceRoot":""}