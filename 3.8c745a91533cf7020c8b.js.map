{"version":3,"sources":["webpack:///./src/app/modules/employee/employee.service.ts","webpack:///./src/app/modules/leave/policy/leave-policy.service.ts"],"names":[],"mappings":"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","file":"3.8c745a91533cf7020c8b.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport { Api } from 'core/services/api.service';\nimport {\n  Name,\n  ContactNumber,\n  SocialSecurity,\n  EmergencyContact,\n  Qualification\n} from 'modules/user/profile/profile.service';\nimport { Department } from 'modules/organization/department/department.service';\nimport { Address } from 'shared/components/address/address.component';\nimport { clone } from 'lodash';\n\nexport class UserReference {\n\n  supervisor_id: string;\n  name: string;\n}\n\nexport class Employee {\n\n  _id: string;\n  name: Name = new Name();\n  email_id: string = '';\n  employee_id: string;\n  employee_type: number;\n  department: string;\n  designation: string;\n  supervisor: string;\n  user_status: number;\n  is_supervisor?: boolean;\n  is_chief_executive?: boolean;\n  is_super_admin: boolean;\n}\n\nexport class EmployeeList {\n\n  _id: string;\n  name: Name = new Name();\n  email_id: string = '';\n  employee_id: string;\n  employee_type: number;\n  department?: Department;\n  designation: string;\n  supervisor?: UserReference;\n  user_status: number;\n  is_supervisor?: boolean;\n  is_chief_executive?: boolean;\n  is_super_admin?: boolean;\n}\n\nexport class Leave {\n\n  leave_type: string;\n  leaves: number;\n}\n\nexport class EmployeeDetails {\n\n  _id: string;\n  name: Name;\n  full_name: string;\n  employee_type: number;\n  email_id: string;\n  employee_id: string;\n  profile_picture: string;\n  department?: Department;\n  designation: string;\n  supervisor?: UserReference;\n  user_status: number;\n  is_supervisor?: boolean;\n  is_chief_executive?: boolean;\n  is_super_admin?: boolean;\n  contact_number?: string;\n  isd_code?: string;\n  date_of_birth?: string;\n  date_of_joining?: string;\n  last_login?: string;\n  timezone?: string;\n  added_by?: UserReference;\n  gender?: string;\n  marital_status?: string;\n  permanent_address?: Address;\n  correspondence_address?: Address;\n  alternate_email_ids?: Array<String>;\n  alternate_contact_numbers?: Array<ContactNumber>;\n  social_security?: Array<SocialSecurity>;\n  emergency_contacts?: Array<EmergencyContact>;\n  qualification?: Array<Qualification>;\n  leaves?: Array<Leave>;\n}\n\n@Injectable()\nexport class EmployeeService extends Api {\n\n  private _base_url = '/employees';\n  private _file_url = '/files';\n\n  getEmployees(\n    query: Map<string, any>,\n    page?: number,\n    limit?: number,\n    fields?: Array<string>\n  ): Promise<{ count: number, users: EmployeeList[] }> {\n\n    if (!query) {\n      query = new Map<string, any>();\n    }\n    if (page > 0) {\n      query.set('page', page);\n    }\n    if (limit > 0) {\n      query.set('limit', limit);\n    }\n    if (fields) {\n      query.set('fields', fields.join(','));\n    }\n\n    return this.get(this._base_url, query)\n      .then(response => {\n        return {\n          count: response['count'],\n          users: response['data'] as EmployeeList[]\n        };\n      });\n  }\n\n  postEmployee(user: any) {\n\n    return this.post(this._base_url, user)\n      .then(response => response);\n  }\n\n  putEmployee(id: string, user: any) {\n\n    return this.put(this._base_url + '/' + id, user)\n      .then(response => response);\n  }\n\n  getEmployeeDetails(id: string) {\n\n    return this.get(this._base_url + '/' + id)\n      .then(response => response);\n  }\n\n  markAsSupervisor(employee_id: string) {\n\n    return this.patch(this._base_url + '/supervisors/' + employee_id)\n      .then(response => response);\n  }\n\n  unmarkAsSupervisor(employee_id: string) {\n\n    return this.delete(this._base_url + '/supervisors/' + employee_id)\n      .then(response => response);\n  }\n\n  markAsChiefExecutive(employee_id: string) {\n\n    return this.patch(this._base_url + '/chiefexecutives/' + employee_id)\n      .then(response => response);\n  }\n\n  unmarkAsChiefExecutive(employee_id: string) {\n\n    return this.delete(this._base_url + '/chiefexecutives/' + employee_id)\n      .then(response => response);\n  }\n\n  markAsSuperAdmin(employee_id: string) {\n\n    return this.patch(this._base_url + '/superadmins/' + employee_id)\n      .then(response => response);\n  }\n\n  unmarkAsSuperAdmin(employee_id: string) {\n\n    return this.delete(this._base_url + '/superadmins/' + employee_id)\n      .then(response => response);\n  }\n\n  resetPassword(user_id: string) {\n\n    return this.patch(this._base_url + '/reset/' + user_id)\n      .then(response => response);\n  }\n\n  uploadBulkEmployee(file: File) {\n\n    const formData = new FormData();\n    formData.append('file', file);\n\n    const query_params = new Map<string, any>();\n    query_params.set('type', 'bulk_employee');\n\n    let headers = clone(this.headers);\n    headers = headers.delete('Content-Type');\n    const config = new Map<string, any>();\n    config.set('headers', headers);\n\n    return this.post(this._file_url + '/upload', formData, query_params, config)\n      .then(response => {\n\n        const body = {\n          file: response.file\n        };\n\n        return this.post(this._file_url + '/parse', body, query_params)\n          .then(data => data);\n      });\n  }\n\n  exportEmployees(query?: Map<string, any>, fields?: Array<string>) {\n\n    if (!query) {\n      query = new Map<string, any>();\n    }\n    if (fields) {\n      query.set('fields', fields.join(','));\n    }\n    query.set('export', 1);\n\n    return this.get(this._base_url, query)\n      .then(data => data);\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { TYPE } from 'config/constants/leave';\nimport { ALLOCATION, STATUS } from 'config/constants/leave-policy';\nimport { Api } from 'core/services/api.service';\nimport { EXPIRY } from 'config/constants/compensatory-off';\n\nexport class LeaveApproval {\n\n  required: boolean = false;\n  from_supervisor: boolean = false;\n  users: string[];\n}\n\nexport class CompensatoryOffExpiry {\n\n  type: EXPIRY;\n  count?: number;\n}\n\nexport class CompensatoryOffApproval {\n\n  from_supervisor: boolean = false;\n  users: string[];\n}\n\nexport class CompensatoryOff {\n\n  expiry: CompensatoryOffExpiry;\n  approval: CompensatoryOffApproval;\n\n  constructor() {\n\n    this.expiry = new CompensatoryOffExpiry();\n    this.approval = new CompensatoryOffApproval();\n  }\n}\n\nexport class Leave {\n\n  leave_type: TYPE;\n  count: number;\n  carry_forward: boolean = false;\n  maximum_count: number;\n  loaned_count: number;\n  sandwich: boolean = false;\n  allocation: ALLOCATION;\n  compensatory_off?: CompensatoryOff;\n}\n\nexport class DepartmentAppliesTo {\n\n  department_id: string;\n  name: string;\n}\n\nexport class AppliesTo {\n\n  everyone: boolean;\n  everyone_else: boolean;\n  employee_types: Array<number>;\n  departments: Array<string | DepartmentAppliesTo>;\n}\n\nexport class LeavePolicy {\n\n  _id: string;\n  organization_id: string;\n  title: string;\n  start_date: Date;\n  end_date: Date;\n  allowed_back_days: number;\n  approval: LeaveApproval = new LeaveApproval();\n  leaves: Leave[];\n  applies_to: AppliesTo[];\n  reiterate: boolean = false;\n  leave_policy_status: STATUS;\n\n  constructor() {\n\n    this.leaves = [];\n    this.leaves.push(new Leave());\n  }\n\n  addLeave() {\n    this.leaves.push(new Leave());\n  }\n\n  removeLeave(index) {\n    this.leaves.splice(index, 1);\n  }\n}\n\n@Injectable()\nexport class LeavePolicyService extends Api {\n\n  private _base_url: string = '/leaves/policies';\n\n  getPolicies(filters?: Map<string, string>): Promise<LeavePolicy[]> {\n\n    return this.get(this._base_url, filters)\n      .then(response => response['data'] as LeavePolicy[]);\n  }\n\n  postPolicy(policy: LeavePolicy): Promise<Object> {\n\n    return this.post(this._base_url, policy)\n      .then(response => response);\n  }\n\n  putPolicy(policy: LeavePolicy) {\n\n    return this.put(this._base_url + '/' + policy._id, policy)\n      .then(response => response);\n  }\n}\n"],"sourceRoot":""}