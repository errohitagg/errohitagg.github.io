{"version":3,"sources":["webpack:///./src/app/modules/leave/comp-off/apply-comp-off/apply-comp-off.component.html","webpack:///./src/app/modules/leave/comp-off/apply-comp-off/apply-comp-off.component.ts","webpack:///./src/app/modules/leave/comp-off/comp-off.module.ts","webpack:///./src/app/modules/leave/comp-off/comp-off.routing.ts","webpack:///./src/app/modules/leave/comp-off/comp-off.service.ts","webpack:///./src/app/modules/leave/comp-off/list-comp-off/list-comp-off.component.html","webpack:///./src/app/modules/leave/comp-off/list-comp-off/list-comp-off.component.ts","webpack:///./src/app/modules/leave/comp-off/review-comp-off/review-comp-off.component.html","webpack:///./src/app/modules/leave/comp-off/review-comp-off/review-comp-off.component.ts"],"names":[],"mappings":"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","file":"comp-off-comp-off-module.js","sourcesContent":["module.exports = \"<div class=\\\"animated fadeIn\\\">\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-12\\\">\\n      <div class=\\\"card\\\">\\n        <div class=\\\"card-body\\\">\\n\\n          <div class=\\\"row\\\">\\n            <div class=\\\"col-12\\\">\\n\\n              <form #compoffForm=\\\"ngForm\\\">\\n\\n                <div class=\\\"form-group row\\\">\\n\\n                  <label class=\\\"col-3 col-form-label\\\">Date</label>\\n                  <div class=\\\"col-3 input-group\\\">\\n                    <input type=\\\"text\\\" name=\\\"date\\\" class=\\\"form-control\\\" id=\\\"date\\\" [(ngModel)]=\\\"compoff.date\\\" bsDatepicker #date=\\\"bsDatepicker\\\" [bsConfig]=\\\"dateConfig\\\">\\n                    <span class=\\\"input-group-append\\\">\\n                      <button class=\\\"btn\\\" (click)=\\\"date.show()\\\" [attr.aria-expanded]=\\\"date.isOpen\\\">\\n                        <i class=\\\"fa fa-calendar\\\"></i>\\n                      </button>\\n                    </span>\\n                  </div>\\n\\n                </div>\\n\\n                <div class=\\\"form-group row\\\">\\n                  <label class=\\\"col-3 col-form-label\\\">Summary</label>\\n                  <div class=\\\"col-9\\\">\\n                    <textarea name=\\\"summary\\\" class=\\\"form-control\\\" id=\\\"summary\\\" [(ngModel)]=\\\"compoff.summary\\\"></textarea>\\n                  </div>\\n                </div>\\n\\n              </form>\\n\\n              <div class=\\\"form-actions row mt-4\\\">\\n                <div class=\\\"col-12\\\">\\n                  <button type=\\\"button\\\" class=\\\"btn btn-link pull-right\\\" routerLink=\\\"/leave/comp-off\\\">Cancel</button>\\n                  <button [disabled]=\\\"!compoffForm.valid\\\" type=\\\"submit\\\" class=\\\"btn btn-primary pull-right\\\" (click)=\\\"applyCompOff()\\\">Apply</button>\\n                </div>\\n              </div>\\n\\n            </div>\\n          </div>\\n\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\\n<app-success-modal #successModal title=\\\"Success!\\\">\\n  <content>\\n    Compensatory-Off Applied Successfully\\n  </content>\\n</app-success-modal>\\n\\n<app-error-modal #errorModal title=\\\"Error!\\\">\\n  <content>\\n    <p>There was an error applying for Compensatory-Off. {{error}}</p>\\n    <ul>\\n      <li *ngFor=\\\"let attribute of invalid_attributes\\\">{{attribute}}</li>\\n    </ul>\\n  </content>\\n</app-error-modal>\"","import { Component, OnInit, ViewEncapsulation, ViewChild } from '@angular/core';\n\nimport { SuccessModalComponent } from 'shared/components/success-modal/success-modal.component';\nimport { ErrorModalComponent } from 'shared/components/error-modal/error-modal.component';\nimport { ApplyCompOff, CompensatoryOffService } from '../comp-off.service';\nimport { DatePipe } from '@angular/common';\n\nconst error_map = {\n  date: 'Date',\n  summary: 'Summary'\n};\n\n@Component({\n  selector: 'app-apply-comp-off',\n  templateUrl: './apply-comp-off.component.html',\n  encapsulation: ViewEncapsulation.None,\n  providers: [CompensatoryOffService, DatePipe]\n})\nexport class ApplyCompOffComponent implements OnInit {\n  @ViewChild('errorModal') errorModal: ErrorModalComponent;\n  @ViewChild('successModal') successModal: SuccessModalComponent;\n\n  compoff: ApplyCompOff;\n\n  dateConfig: Object;\n\n  error: string;\n  invalid_attributes: string[];\n\n  constructor(\n    private compoffService: CompensatoryOffService,\n    private datePipe: DatePipe\n  ) {\n\n    this.compoff = new ApplyCompOff();\n\n    this.dateConfig = {\n      dateInputFormat: 'YYYY-MM-DD',\n      containerClass: 'theme-blue',\n      showWeekNumbers: false,\n      maxDate: new Date()\n    };\n  }\n\n  async ngOnInit() {\n  }\n\n  private __validate() {\n    return true;\n  }\n\n  private __sanitizeCompoff(compOff) {\n\n    if (compOff.date !== undefined) {\n      compOff.date = this.datePipe.transform(compOff.date, 'yyyy-MM-dd');\n    }\n\n    return compOff;\n  }\n\n  applyCompOff() {\n\n    if (this.__validate()) {\n\n      let compOff = JSON.parse(JSON.stringify(this.compoff));\n      compOff = this.__sanitizeCompoff(compOff);\n      this.error = '';\n      this.invalid_attributes = [];\n\n      this.compoffService.apply(compOff).then(data => {\n\n        this.successModal.show();\n\n      }).catch(err => {\n\n        this.error = err.error.message.text;\n        if (err.error.invalid_attributes) {\n          for (const key in err.error.invalid_attributes) {\n            if (err.error.invalid_attributes.hasOwnProperty(key)) {\n              this.invalid_attributes.push(error_map[key] ? error_map[key] : err.error.invalid_attributes[key]);\n            }\n          }\n        }\n        this.errorModal.show();\n      });\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { FormsModule } from '@angular/forms';\n\nimport { CompensatoryOffRoutingModule } from './comp-off.routing';\nimport { ApplyCompOffComponent } from './apply-comp-off/apply-comp-off.component';\nimport { ListCompOffComponent } from './list-comp-off/list-comp-off.component';\nimport { ReviewCompOffComponent } from './review-comp-off/review-comp-off.component';\nimport { BsDatepickerModule } from 'ngx-bootstrap';\nimport { ApplicationComponentsModule } from 'modules/application-components.module';\n\n@NgModule({\n  imports: [\n    CompensatoryOffRoutingModule,\n    FormsModule,\n    HttpClientModule,\n    CommonModule,\n    BsDatepickerModule,\n    ApplicationComponentsModule\n  ],\n  declarations: [\n    ApplyCompOffComponent,\n    ListCompOffComponent,\n    ReviewCompOffComponent\n  ],\n  providers: [\n  ]\n})\nexport class CompensatoryOffModule { }\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { AuthenticationGuard } from 'core/services/authentication.service';\nimport { AuthorizationGuard } from 'core/services/authorization.service';\nimport { ListCompOffComponent } from './list-comp-off/list-comp-off.component';\nimport { ApplyCompOffComponent } from './apply-comp-off/apply-comp-off.component';\nimport { ReviewCompOffComponent } from './review-comp-off/review-comp-off.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    data: {\n      title: 'Comp-Off'\n    },\n    children: [\n      {\n        path: '',\n        redirectTo: 'list'\n      },\n      {\n        path: 'list',\n        data: {\n          title: 'List',\n          access: {\n            entity: 'leave:compensatory_off',\n            action: 'find:get'\n          }\n        },\n        canActivate: [AuthenticationGuard, AuthorizationGuard],\n        component: ListCompOffComponent\n      },\n      {\n        path: 'apply',\n        canActivate: [AuthenticationGuard, AuthorizationGuard],\n        data: {\n          title: 'Apply',\n          access: {\n            entity: 'leave:compensatory_off',\n            action: 'create:post'\n          }\n        },\n        component: ApplyCompOffComponent\n      },\n      {\n        path: 'review',\n        data: {\n          title: 'Review',\n          access: {\n            entity: 'leave:compensatory_off',\n            action: 'approve:put'\n          }\n        },\n        canActivate: [AuthenticationGuard, AuthorizationGuard],\n        component: ReviewCompOffComponent\n      }\n    ]\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class CompensatoryOffRoutingModule { }\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\nimport { Api } from 'core/services/api.service';\n\nclass ReviewedBy {\n\n  user_id: string;\n  name: string\n};\n\nexport class ApplyCompOff {\n\n  date: string = '';\n  summary: string = '';\n};\n\nexport class CompOff {\n\n  _id: string;\n  user_id: string;\n  date: string;\n  summary: string;\n  reviewed_by: ReviewedBy;\n  comp_off_status: number;\n}\n\n@Injectable()\nexport class CompensatoryOffService extends Api {\n\n  private _base_url: string = '/leaves/compoffs';\n\n  constructor(http: HttpClient) {\n\n    super(http);\n  }\n\n  apply(compOff: ApplyCompOff): Promise<Object> {\n\n    return this.post(this._base_url, compOff)\n      .then(response => response);\n  }\n\n  getCompOffs(query?: Map<string, any>): Promise<CompOff[]> {\n\n    return this.get(this._base_url, query)\n      .then(response => response['data'] as CompOff[]);\n  }\n\n  approve(comp_off_id: string): Promise<Object> {\n\n    return this.post(this._base_url + '/approve/' + comp_off_id, {})\n      .then(response => response);\n  }\n\n  reject(comp_off_id: string): Promise<Object> {\n\n    return this.post(this._base_url + '/reject/' + comp_off_id, {})\n      .then(response => response);\n  }\n}\n","module.exports = \"<div class=\\\"animated fadeIn\\\">\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-12\\\">\\n      <div class=\\\"card\\\">\\n        <div class=\\\"card-body\\\">\\n\\n          <div class=\\\"row mb-4\\\">\\n            <div class=\\\"col-12 text-right\\\">\\n              <button class=\\\"btn btn-primary mr-1\\\" type=\\\"button\\\" routerLink=\\\"/leave/comp-off/review\\\" *ngIf=\\\"reviewAllowed\\\">+ Review Comp-Off(s)</button>\\n              <button class=\\\"btn btn-primary\\\" type=\\\"button\\\" routerLink=\\\"/leave/comp-off/apply\\\" *ngIf=\\\"applyAllowed\\\">+ Apply Comp-Off</button>\\n            </div>\\n          </div>\\n\\n          <div class=\\\"text-center m-5\\\" *ngIf=\\\"compoffs.length == 0\\\">\\n            <h3>No Compensatory-Off applied</h3>\\n          </div>\\n\\n          <table class=\\\"table table-striped\\\" *ngIf=\\\"compoffs.length > 0\\\">\\n            <thead>\\n              <tr>\\n                <th>#</th>\\n                <th>Date</th>\\n                <th>Summary</th>\\n                <th>Reviewed By</th>\\n                <th>Expiry Date</th>\\n                <th>Status</th>\\n              </tr>\\n            </thead>\\n            <tbody>\\n              <tr *ngFor=\\\"let compoff of compoffs; let i = index\\\">\\n                <td>{{i+1}}.</td>\\n                <td>{{compoff.date | date: 'dd-MM-yyyy'}}</td>\\n                <td>{{compoff.summary}}</td>\\n                <td>\\n                  <span *ngIf=\\\"compoff.reviewed_by\\\">{{compoff.reviewed_by.name}}</span>\\n                </td>\\n                <td>\\n                  <span *ngIf=\\\"compoff.expiry_date\\\">{{compoff.expiry_date | date: 'dd-MM-yyyy'}}</span>\\n                </td>\\n                <td>\\n                  <span class=\\\"badge\\\" [ngClass]=\\\"getStatusBadge(compoff.comp_off_status)\\\">{{compoff.comp_off_status}}</span>\\n                </td>\\n              </tr>\\n            </tbody>\\n          </table>\\n\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\"","import { Component, OnInit, ViewEncapsulation, ViewChild } from '@angular/core';\n\nimport { Authorization } from 'core/services/authorization.service';\nimport { CompensatoryOffService, CompOff } from 'modules/leave/comp-off/comp-off.service';\n\n@Component({\n  selector: 'app-list-comp-off',\n  templateUrl: './list-comp-off.component.html',\n  encapsulation: ViewEncapsulation.None,\n  providers: [CompensatoryOffService, Authorization]\n})\nexport class ListCompOffComponent implements OnInit {\n\n  compoffs: CompOff[] = [];\n\n  applyAllowed: boolean = false;\n  reviewAllowed: boolean = false;\n\n  constructor(\n    private compOffService: CompensatoryOffService,\n    private authorization: Authorization\n  ) { }\n\n  async ngOnInit() {\n\n    this.applyAllowed = await this.authorization.hasAccess({\n      entity: 'leave:compensatory_off',\n      action: 'create:post'\n    });\n\n    this.reviewAllowed = await this.authorization.hasAccess({\n      entity: 'leave:compensatory_off',\n      action: 'approve:put'\n    });\n\n    this.loadCompOffs();\n  }\n\n  loadCompOffs() {\n\n    const self = this;\n    this.compOffService.getCompOffs().then(compoffs => {\n\n      self.compoffs = compoffs;\n    });\n  }\n\n  getStatusBadge(status) {\n\n    switch (status) {\n\n      case 2:\n      case 5:\n        return 'badge-success';\n      case 3: return 'badge-danger';\n      case 4:\n      case 6:\n        return 'badge-dark';\n      default: return 'badge-default';\n    }\n  }\n}\n","module.exports = \"<div class=\\\"animated fadeIn\\\">\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-12\\\">\\n      <div class=\\\"card\\\">\\n        <div class=\\\"card-body\\\">\\n\\n          <div class=\\\"text-center m-5\\\" *ngIf=\\\"compoffs.length == 0\\\">\\n            <h3>No Compensatory-Offs to review</h3>\\n          </div>\\n\\n          <table class=\\\"table table-striped\\\" *ngIf=\\\"compoffs.length > 0\\\">\\n            <thead>\\n              <tr>\\n                <th>#</th>\\n                <th>Employee</th>\\n                <th>Date</th>\\n                <th>Summary</th>\\n                <th></th>\\n              </tr>\\n            </thead>\\n            <tbody>\\n              <tr *ngFor=\\\"let compoff of compoffs; let i = index\\\">\\n                <td>{{i+1}}.</td>\\n                <td>{{compoff.name}}</td>\\n                <td>{{compoff.date | date: 'dd-MM-yyyy'}}</td>\\n                <td>{{compoff.summary}}</td>\\n                <td *ngIf=\\\"!reviewed[compoff._id]\\\">\\n\\n                  <button type=\\\"button\\\" class=\\\"btn btn-success mr-1\\\" (click)=\\\"approve(compoff._id)\\\" [disabled]=\\\"approving[compoff._id] || rejecting[compoff._id]\\\">\\n                    <span class=\\\"fa fa-spinner\\\" [ngClass]=\\\"{'fa-spin': approving[compoff._id]}\\\" *ngIf=\\\"approving[compoff._id]\\\"></span>\\n                    &nbsp;Approve\\n                  </button>\\n\\n                  <button type=\\\"button\\\" class=\\\"btn btn-danger\\\" (click)=\\\"reject(compoff._id)\\\" [disabled]=\\\"approving[compoff._id] || rejecting[compoff._id]\\\">\\n                    <span class=\\\"fa fa-spinner\\\" [ngClass]=\\\"{'fa-spin': rejecting[compoff._id]}\\\" *ngIf=\\\"rejecting[compoff._id]\\\"></span>\\n                    &nbsp;Reject\\n                  </button>\\n\\n                </td>\\n              </tr>\\n            </tbody>\\n          </table>\\n\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\"","import { Component, ViewEncapsulation, OnInit } from '@angular/core';\nimport { STATUS } from 'config/constants/leave';\nimport { CompensatoryOffService, CompOff } from '../comp-off.service';\n\n@Component({\n  selector: 'app-review-comp-off',\n  templateUrl: './review-comp-off.component.html',\n  encapsulation: ViewEncapsulation.None,\n  providers: [CompensatoryOffService]\n})\nexport class ReviewCompOffComponent implements OnInit {\n\n  compoffs: CompOff[] = [];\n\n  reviewed: Array<Boolean>;\n  approving: Array<Boolean>;\n  rejecting: Array<Boolean>;\n\n  constructor(\n    private compoffService: CompensatoryOffService\n  ) {\n\n    this.reviewed = [];\n    this.approving = [];\n    this.rejecting = []\n  }\n\n  async ngOnInit() {\n\n    this.loadCompOffs();\n  }\n\n  private loadCompOffs() {\n\n    const self = this;\n    const userId = localStorage.getItem('userId');\n    const query = new Map<string, any>();\n    query.set('approval_by', userId);\n    query.set('leave_status', STATUS.APPLIED);\n\n    this.compoffService.getCompOffs(query).then(compoffs => {\n      self.compoffs = this.compoffs;\n    });\n  }\n\n  approve(comp_off_id) {\n\n    this.approving[comp_off_id] = true;\n    this.compoffService.approve(comp_off_id).then(response => {\n\n      this.reviewed[comp_off_id] = true;\n      this.approving[comp_off_id] = false;\n    });\n  }\n\n  reject(comp_off_id) {\n\n    this.rejecting[comp_off_id] = true;\n    this.compoffService.reject(comp_off_id).then(response => {\n\n      this.reviewed[comp_off_id] = true;\n      this.rejecting[comp_off_id] = false\n    });\n  }\n}\n"],"sourceRoot":""}