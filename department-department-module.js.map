{"version":3,"sources":["webpack:///./src/app/modules/organization/department/department.module.ts","webpack:///./src/app/modules/organization/department/department.routing.ts","webpack:///./src/app/modules/organization/department/list-department/list-department.component.html","webpack:///./src/app/modules/organization/department/list-department/list-department.component.ts","webpack:///./src/app/modules/organization/department/manage-department/manage-department.component.html","webpack:///./src/app/modules/organization/department/manage-department/manage-department.component.ts"],"names":[],"mappings":"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","file":"department-department-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { FormsModule } from '@angular/forms';\n\nimport { DepartmentRoutingModule } from './department.routing';\nimport { ListDepartmentComponent } from './list-department/list-department.component';\nimport { ManageDepartmentComponent } from './manage-department/manage-department.component';\nimport { ApplicationComponentsModule } from 'modules/application-components.module';\nimport { ApplicationPipesModule } from 'modules/application-pipes.module';\n\n@NgModule({\n  imports: [\n    DepartmentRoutingModule,\n    FormsModule,\n    HttpClientModule,\n    CommonModule,\n    ApplicationComponentsModule,\n    ApplicationPipesModule\n  ],\n  declarations: [\n    ListDepartmentComponent,\n    ManageDepartmentComponent\n  ],\n  providers: [\n  ]\n})\nexport class DepartmentModule { }\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ListDepartmentComponent } from './list-department/list-department.component';\nimport { ManageDepartmentComponent } from './manage-department/manage-department.component';\nimport { AuthenticationGuard } from 'core/services/authentication.service';\nimport { AuthorizationGuard } from 'core/services/authorization.service';\nimport { ObjectidGuard } from 'core/services/objectid.service';\n\nconst routes: Routes = [\n  {\n    path: '',\n    data: {\n      title: 'Department'\n    },\n    children: [\n      {\n        path: '',\n        redirectTo: 'list'\n      },\n      {\n        path: 'list',\n        canActivate: [AuthenticationGuard, AuthorizationGuard],\n        data: {\n          title: 'List',\n          access: {\n            module: 'organization',\n            entity: 'department',\n            action: 'find'\n          }\n        },\n        component: ListDepartmentComponent\n      },\n      {\n        path: 'add',\n        canActivate: [AuthenticationGuard, AuthorizationGuard],\n        data: {\n          title: 'Add',\n          access: {\n            module: 'organization',\n            entity: 'department',\n            action: 'create'\n          }\n        },\n        component: ManageDepartmentComponent\n      },\n      {\n        path: 'edit/:id',\n        data: {\n          title: 'Edit',\n          access: {\n            module: 'organization',\n            entity: 'department',\n            action: 'update'\n          }\n        },\n        canActivate: [AuthenticationGuard, AuthorizationGuard, ObjectidGuard],\n        component: ManageDepartmentComponent\n      }\n    ]\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class DepartmentRoutingModule { }\n","module.exports = \"<div class=\\\"animated fadeIn\\\">\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-12\\\">\\n      <div class=\\\"card\\\">\\n        <div class=\\\"card-body\\\">\\n\\n          <div class=\\\"row mb-4\\\" *ngIf=\\\"createAllowed\\\">\\n            <div class=\\\"col-12\\\">\\n              <button class=\\\"btn btn-primary pull-right\\\" role='button' type=\\\"button\\\" routerLink=\\\"/organization/department/add\\\">+ Add Department</button>\\n            </div>\\n          </div>\\n\\n          <div class=\\\"text-center m-5\\\" *ngIf=\\\"loading\\\">\\n            <h3><i class=\\\"fa fa-refresh fa-spin\\\"></i> Loading Departments</h3>\\n          </div>\\n\\n          <div class=\\\"text-center m-5\\\" *ngIf=\\\"!loading && departments.length == 0\\\">\\n            <h3>No Departments in organization</h3>\\n          </div>\\n\\n          <table class=\\\"table table-striped\\\" *ngIf=\\\"!loading && departments.length > 0\\\">\\n            <thead>\\n              <tr>\\n                <th>#</th>\\n                <th>Name</th>\\n                <th>No. of Employees</th>\\n                <th>Status</th>\\n                <th></th>\\n              </tr>\\n            </thead>\\n            <tbody>\\n              <tr *ngFor=\\\"let dept of departments; let i = index\\\">\\n                <td>{{i+1}}.</td>\\n                <td>{{dept.name}}</td>\\n                <td>{{dept.count.employees}}</td>\\n                <td>{{dept.department_status | constants: 'department.status'}}</td>\\n                <td class=\\\"text-center\\\">\\n                  <button class=\\\"btn btn-primary btn-sm\\\" role=\\\"button\\\" type=\\\"button\\\" routerLink=\\\"/organization/department/edit/{{dept._id.toString()}}\\\" *ngIf=\\\"editAllowed\\\">Edit</button>\\n                </td>\\n              </tr>\\n            </tbody>\\n          </table>\\n\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"","import { Component, OnInit, ViewEncapsulation } from '@angular/core';\nimport { Department, DepartmentService } from 'modules/organization/department/department.service'\nimport { Access } from 'core/providers/access.service';\n\n@Component({\n  selector: 'app-departments',\n  templateUrl: './list-department.component.html',\n  providers: [ DepartmentService ],\n  encapsulation: ViewEncapsulation.None\n})\nexport class ListDepartmentComponent implements OnInit {\n\n  departments: Department[];\n\n  loading: boolean = false;\n  createAllowed: boolean = false;\n  editAllowed: boolean = false;\n\n  constructor(private departmentService: DepartmentService, private access: Access) {\n    this.departments = [];\n  }\n\n  async ngOnInit() {\n\n    this.loading = true;\n    this.departmentService.getDepartments().then(depts => {\n\n      this.loading = false;\n      this.departments = depts\n    });\n\n    this.createAllowed = await this.access.hasAccess({\n      module: 'organization',\n      entity: 'department',\n      action: 'create'\n    });\n\n    this.editAllowed = await this.access.hasAccess({\n      module: 'organization',\n      entity: 'department',\n      action: 'update'\n    });\n  }\n\n  noOfDesignations() {\n\n    let total = 0;\n    this.departments.forEach (x => total += x.designations.length);\n    return total;\n  }\n\n}\n","module.exports = \"<div class=\\\"animated fadeIn\\\">\\n  <div class=\\\"card\\\">\\n    <div class=\\\"card-body\\\">\\n      <div class=\\\"row\\\">\\n        <div class=\\\"col-12\\\">\\n\\n          <form #departmentForm=\\\"ngForm\\\">\\n\\n            <div class=\\\"form-group row\\\">\\n              <label class=\\\"col-3 col-form-label\\\">Department Name</label>\\n              <div class=\\\"col-9\\\">\\n                <input type=\\\"text\\\" name=\\\"name\\\" class=\\\"form-control\\\" id=\\\"name\\\" placeholder=\\\"Department Name\\\" [(ngModel)]=\\\"data.name\\\" #name=\\\"ngModel\\\" required minlength=\\\"3\\\">\\n                <app-inline-error [control]=\\\"name\\\"></app-inline-error>\\n              </div>\\n            </div>\\n\\n            <div class=\\\"form-group row\\\">\\n              <label class=\\\"col-3 col-form-label\\\">Designations</label>\\n              <div class=\\\"col-6\\\">\\n                <div class=\\\"row\\\">\\n                  <div class=\\\"col-md-6 form-group\\\" *ngFor=\\\"let designation of data.designations; let i = index; trackBy: trackByIndex\\\">\\n                    <div class=\\\"input-group\\\">\\n                      <input type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"designation-{{i}}\\\" placeholder=\\\"Designation\\\" [(ngModel)]=\\\"data.designations[i]\\\" #designation=\\\"ngModel\\\" required minlength=\\\"3\\\">\\n                        <span class=\\\"input-group-append\\\">\\n                          <button type=\\\"button\\\" class=\\\"btn btn-danger\\\" (click)=\\\"removeDesignation(i)\\\">\\n                            <i class=\\\"fa fa-remove\\\"></i>\\n                          </button>\\n                        </span>\\n                    </div>\\n                    <app-inline-error [control]=\\\"designation\\\"></app-inline-error>\\n                  </div>\\n                </div>\\n              </div>\\n              <div class=\\\"col-3\\\">\\n                <button class=\\\"btn btn-outline-success\\\" (click)=\\\"addNewDesignation()\\\" type=button>+ Add Designation</button>\\n              </div>\\n            </div>\\n\\n          </form>\\n\\n          <div class=\\\"form-actions row\\\">\\n            <div class=\\\"col-12 text-right\\\">\\n              <button [disabled]=\\\"!departmentForm.valid\\\" type=\\\"submit\\\" class=\\\"btn btn-primary\\\" (click)=\\\"postDepartment()\\\">Submit</button>\\n              <button type=\\\"button\\\" class=\\\"btn btn-link\\\" routerLink=\\\"/organization/department\\\">Cancel</button>\\n            </div>\\n          </div>\\n\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\\n<app-success-modal #successModal title=\\\"Success!\\\">\\n  <div content>\\n    <span *ngIf=\\\"!data._id || !data._id.toString()\\\">Created</span>\\n    <span *ngIf=\\\"data._id && data._id.toString()\\\">Updated</span> Department Successfully\\n  </div>\\n</app-success-modal>\\n\\n<app-error-modal #errorModal title=\\\"\\\">\\n  <div content>\\n    There was an error\\n    <span *ngIf=\\\"!data._id || !data._id.toString()\\\">creating</span>\\n    <span *ngIf=\\\"data._id && data._id.toString()\\\">updating</span>\\n    this department.\\n    <br>\\n    <p>Details: {{error}}</p>\\n  </div>\\n</app-error-modal>\"","import { Component, OnInit, ViewEncapsulation, ViewChild } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\n\nimport { Department, DepartmentService } from 'modules/organization/department/department.service'\n\nimport { SuccessModalComponent  } from 'shared/components/success-modal/success-modal.component';\nimport { ErrorModalComponent } from 'shared/components/error-modal/error-modal.component';\n\n@Component({\n  selector: 'app-manage-department',\n  templateUrl: './manage-department.component.html',\n  providers: [ DepartmentService ],\n  encapsulation: ViewEncapsulation.None\n})\nexport class ManageDepartmentComponent implements OnInit {\n  @ViewChild('successModal') successModal: SuccessModalComponent;\n  @ViewChild('errorModal') errorModal: ErrorModalComponent;\n\n  data: Department = new Department();\n\n  error: string = '';\n\n  constructor(private route: ActivatedRoute, private departmentService: DepartmentService) {\n\n    if (this.route.snapshot.params['id']) {\n      this.data._id = this.route.snapshot.params['id'];\n    }\n  }\n\n  ngOnInit() {\n\n    if (this.data._id) {\n\n      this.departmentService.getDepartment(this.data._id)\n        .then(department => {\n          this.data = department;\n        });\n\n    } else {\n      this.addNewDesignation();\n    }\n  }\n\n  addNewDesignation() {\n\n    this.data.designations.push('');\n    this.data.designations = this.data.designations.slice();\n  }\n\n  removeDesignation(i) {\n\n    this.data.designations.splice(i, 1);\n  }\n\n  postDepartment() {\n\n    this.error = '';\n    if (this.data._id && this.data._id.toString()) {\n\n      this.departmentService.putDepartment(this.data).then(response => {\n\n        this.successModal.show('/organization/department');\n\n      }).catch(err => {\n\n        this.error = err.error.message.text;\n        this.errorModal.show();\n      });\n\n    } else {\n\n      this.departmentService.postDepartment(this.data).then(response => {\n\n        this.successModal.show('/organization/department');\n\n      }).catch(err => {\n\n        this.error = err.error.message.text;\n        this.errorModal.show();\n      });\n    }\n  }\n\n  trackByIndex(index: number, value: number) {\n    return index;\n  }\n}\n"],"sourceRoot":""}